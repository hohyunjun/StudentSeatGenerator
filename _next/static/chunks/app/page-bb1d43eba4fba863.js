(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{67:function(){},2061:function(){},1567:function(e,t,r){Promise.resolve().then(r.bind(r,5052))},5052:function(e,t,r){"use strict";r.d(t,{default:function(){return F}});var s=r(7437),a=r(2265),l=r(1538),n=r(2218),i=r(4839),d=r(6164);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,d.m6)((0,i.W)(t))}let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:i=!1,...d}=e,f=i?l.g7:"button";return(0,s.jsx)(f,{className:o(c({variant:a,size:n,className:r})),ref:t,...d})});f.displayName="Button";let u=a.forwardRef((e,t)=>{let{className:r,type:a,...l}=e;return(0,s.jsx)("input",{type:a,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});u.displayName="Input";var m=r(8364);let h=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(m.f,{ref:t,className:o(h(),r),...a})});p.displayName=m.f.displayName;let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});x.displayName="Card";let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",r),...a})});g.displayName="CardHeader";let j=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:o("text-2xl font-semibold leading-none tracking-tight",r),...a})});j.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:o("text-sm text-muted-foreground",r),...a})}).displayName="CardDescription";let v=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:o("p-6 pt-0",r),...a})});v.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter";var b=r(6598),y=r(2421),N=r(4392),w=r(2468);let I=b.fC;b.ZA;let k=b.B4,C=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,s.jsxs)(b.xz,{ref:t,className:o("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[a,(0,s.jsx)(b.JO,{asChild:!0,children:(0,s.jsx)(y.Z,{className:"h-4 w-4 opacity-50"})})]})});C.displayName=b.xz.displayName;let M=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(b.u_,{ref:t,className:o("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(N.Z,{className:"h-4 w-4"})})});M.displayName=b.u_.displayName;let R=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(b.$G,{ref:t,className:o("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(y.Z,{className:"h-4 w-4"})})});R.displayName=b.$G.displayName;let _=a.forwardRef((e,t)=>{let{className:r,children:a,position:l="popper",...n}=e;return(0,s.jsx)(b.h_,{children:(0,s.jsxs)(b.VY,{ref:t,className:o("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...n,children:[(0,s.jsx)(M,{}),(0,s.jsx)(b.l_,{className:o("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(R,{})]})})});_.displayName=b.VY.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(b.__,{ref:t,className:o("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=b.__.displayName;let S=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,s.jsxs)(b.ck,{ref:t,className:o("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(b.wU,{children:(0,s.jsx)(w.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(b.eT,{children:a})]})});S.displayName=b.ck.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(b.Z0,{ref:t,className:o("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=b.Z0.displayName;var z=r(7800);function F(){let[e,t]=(0,a.useState)([]),[r,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[d,o]=(0,a.useState)([]),[c,m]=(0,a.useState)(""),[h,b]=(0,a.useState)(4),[y,N]=(0,a.useState)(6),[w,M]=(0,a.useState)(3),[R,F]=(0,a.useState)("separate"),[V,Z]=(0,a.useState)([]),[A,B]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=[];for(let t=0;t<h*y;t++){let r=Math.floor(t/y),s=t%y,a=Math.floor(s/(y/w))+1,l=y/2*Math.floor(r/2)+Math.floor(s/2)+1;e.push({id:"seat-".concat(t),studentId:null,section:a,group:l})}l(e)},[h,y,w]);let E=(e,t)=>{let r=Math.floor(e/y),s=e%y,a=Math.floor(s/(y/w)),l=y/2*Math.floor(r/2)+Math.floor(s/2),n=Math.floor(t/y),i=t%y,d=Math.floor(i/(y/w)),o=y/2*Math.floor(n/2)+Math.floor(i/2);return a===d&&l===o&&1>=Math.abs(r-n)&&1>=Math.abs(s-i)},O=(e,t)=>{let r=Math.floor(e/y),s=e%y,a=Math.floor(t/y),l=t%y;return y/2*Math.floor(r/2)+Math.floor(s/2)===y/2*Math.floor(a/2)+Math.floor(l/2)},D=(0,a.useRef)(null);return(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"학생 좌석 생성기"}),(0,s.jsxs)(x,{className:"mb-4",children:[(0,s.jsx)(g,{children:(0,s.jsx)(j,{children:"학생 추가"})}),(0,s.jsxs)(v,{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,s.jsx)(u,{type:"text",value:c,onChange:e=>m(e.target.value),placeholder:"학생 이름 입력"}),(0,s.jsx)(f,{onClick:()=>{c.trim()&&(t([...e,{id:"student-".concat(Date.now()),name:c.trim()}]),m(""))},children:"추가"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"file",ref:D,accept:".xlsx, .xls",onChange:e=>{var r;let s=null===(r=e.target.files)||void 0===r?void 0:r[0];if(s){let e=new FileReader;e.onload=e=>{var r;let s=new Uint8Array(null===(r=e.target)||void 0===r?void 0:r.result),a=z.ij(s,{type:"array"}),l=a.SheetNames[0],n=a.Sheets[l],i=z.P6.sheet_to_json(n).map((e,t)=>({id:"student-".concat(Date.now(),"-").concat(t),name:e.이름}));t(e=>[...e,...i])},e.readAsArrayBuffer(s)}},className:"hidden"}),(0,s.jsx)(f,{onClick:()=>{var e;null===(e=D.current)||void 0===e||e.click()},children:"엑셀 파일 업로드"}),(0,s.jsx)(p,{className:"text-sm text-muted-foreground",children:"엑셀 파일 업로드 (.xlsx, .xls)"})]})]})]}),(0,s.jsxs)(x,{className:"mb-4",children:[(0,s.jsx)(g,{children:(0,s.jsx)(j,{children:"좌석 구조"})}),(0,s.jsxs)(v,{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)(p,{htmlFor:"rows",children:"행:"}),(0,s.jsx)(u,{id:"rows",type:"number",value:h,onChange:e=>b(parseInt(e.target.value)),min:1}),(0,s.jsx)(p,{htmlFor:"columns",children:"열:"}),(0,s.jsx)(u,{id:"columns",type:"number",value:y,onChange:e=>N(parseInt(e.target.value)),min:1})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(p,{htmlFor:"sections",children:"분단 수:"}),(0,s.jsx)(u,{id:"sections",type:"number",value:w,onChange:e=>M(parseInt(e.target.value)),min:1,max:y})]})]})]}),(0,s.jsxs)(x,{className:"mb-4",children:[(0,s.jsx)(g,{children:(0,s.jsx)(j,{children:"예외 사항"})}),(0,s.jsxs)(v,{children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsxs)(I,{value:R,onValueChange:e=>{F(e),Z([])},children:[(0,s.jsx)(C,{children:(0,s.jsx)(k,{placeholder:"예외 유형 선택"})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(S,{value:"separate",children:"떨어져 앉아야 함"}),(0,s.jsx)(S,{value:"together",children:"함께 앉아야 함"}),(0,s.jsx)(S,{value:"same-group",children:"같은 모둠이어야 함"}),(0,s.jsx)(S,{value:"different-group",children:"다른 모둠이어야 함"})]})]}),("separate"===R||"together"===R)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(I,{value:V[0],onValueChange:e=>Z([e]),children:[(0,s.jsx)(C,{children:(0,s.jsx)(k,{placeholder:"첫 번째 학생 선택"})}),(0,s.jsx)(_,{children:e.map(e=>(0,s.jsx)(S,{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)(I,{value:V[1],onValueChange:e=>Z(t=>[...t.slice(0,1),e]),children:[(0,s.jsx)(C,{children:(0,s.jsx)(k,{placeholder:"두 번째 학생 선택"})}),(0,s.jsx)(_,{children:e.filter(e=>e.id!==V[0]).map(e=>(0,s.jsx)(S,{value:e.id,children:e.name},e.id))})]})]}),("same-group"===R||"different-group"===R)&&(0,s.jsx)(s.Fragment,{children:[0,1,2,3].map(t=>(0,s.jsxs)(I,{value:V[t],onValueChange:e=>{let r=[...V];r[t]=e,Z(r.filter(Boolean))},children:[(0,s.jsx)(C,{children:(0,s.jsx)(k,{placeholder:"".concat(t+1,"번째 학생 선택").concat(t<2?"":" (선택사항)")})}),(0,s.jsx)(_,{children:e.filter(e=>!V.includes(e.id)||e.id===V[t]).map(e=>(0,s.jsx)(S,{value:e.id,children:e.name},e.id))})]},t))}),(0,s.jsx)(f,{onClick:()=>{("separate"===R||"together"===R)&&2===V.length?(i([...n,{type:R,studentIds:V}]),Z([])):("same-group"===R||"different-group"===R)&&V.length>=2&&V.length<=4?(i([...n,{type:R,studentIds:V}]),Z([])):B("올바른 수의 학생을 선택해주세요.")},children:"예외 추가"})]}),A&&(0,s.jsx)("div",{className:"text-red-500 mt-2",children:A}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"현재 예외 사항:"}),(0,s.jsx)("ul",{className:"list-disc pl-5",children:n.map((t,r)=>(0,s.jsxs)("li",{children:["separate"===t.type&&"떨어져 앉아야 함: ","together"===t.type&&"함께 앉아야 함: ","same-group"===t.type&&"같은 모둠이어야 함: ","different-group"===t.type&&"다른 모둠이어야 함: ",t.studentIds.map(t=>{var r;return null===(r=e.find(e=>e.id===t))||void 0===r?void 0:r.name}).join(", ")]},r))})]})]})]}),(0,s.jsx)(f,{onClick:()=>{B(null);let t=h*y;if(e.length>t){B("학생 수가 좌석 수보다 많습니다.");return}let s=0;for(;s<1e3;){s++;let t={},a=[...e],i=!0;for(let e of n.filter(e=>"together"===e.type)){let s=r.filter(e=>!t[e.id]).filter((t,r,s)=>e.studentIds.every((e,t)=>0===t||E(parseInt(s[r].id.split("-")[1]),parseInt(s[r-1].id.split("-")[1]))));if(s.length<e.studentIds.length){i=!1;break}e.studentIds.forEach((e,r)=>{t[s[r].id]=e,a.splice(a.findIndex(t=>t.id===e),1)})}if(!i)continue;for(let e of n.filter(e=>"same-group"===e.type)){let s=r.filter(e=>!t[e.id]).filter((t,r,s)=>e.studentIds.every((e,t)=>0===t||O(parseInt(s[r].id.split("-")[1]),parseInt(s[r-1].id.split("-")[1]))));if(s.length<e.studentIds.length){i=!1;break}e.studentIds.forEach((e,r)=>{t[s[r].id]=e,a.splice(a.findIndex(t=>t.id===e),1)})}if(!i)continue;for(let e of r)if(!t[e.id]&&a.length>0){let r=Math.floor(Math.random()*a.length),s=a.splice(r,1)[0];t[e.id]=s.id}let c=n.filter(e=>"separate"===e.type),f=!1;for(let e of c){let r=e.studentIds.map(e=>{var r;return null===(r=Object.entries(t).find(t=>{let[,r]=t;return r===e}))||void 0===r?void 0:r[0]}).filter(Boolean);for(let e=0;e<r.length;e++){for(let t=e+1;t<r.length;t++)if(E(parseInt(r[e].split("-")[1]),parseInt(r[t].split("-")[1]))){f=!0;break}if(f)break}if(f)break}let u=n.filter(e=>"different-group"===e.type),m=!1;for(let e of u){let r=e.studentIds.map(e=>{var r;return null===(r=Object.entries(t).find(t=>{let[,r]=t;return r===e}))||void 0===r?void 0:r[0]}).filter(Boolean);for(let e=0;e<r.length;e++){for(let t=e+1;t<r.length;t++)if(O(parseInt(r[e].split("-")[1]),parseInt(r[t].split("-")[1]))){m=!0;break}if(m)break}if(m)break}if(!f&&!m){o([...d,{date:new Date().toISOString(),arrangement:t}]),l(r.map(e=>({...e,studentId:t[e.id]||null})));return}}B("조건을 만족하는 좌석 배치를 찾을 수 없습니다.")},className:"mb-4",children:"좌석 생성"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(g,{children:(0,s.jsx)(j,{children:"현재 좌석 배치"})}),(0,s.jsx)(v,{children:A?(0,s.jsx)("div",{className:"text-red-500",children:A}):(0,s.jsx)("div",{className:"flex space-x-4",children:Array.from({length:w},(t,a)=>(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("h3",{className:"text-center font-semibold mb-2",children:[a+1,"분단"]}),(0,s.jsx)("div",{className:"grid",style:{gridTemplateColumns:"repeat(".concat(y/w,", 1fr)")},children:r.filter(e=>e.section===a+1).map(t=>{var r;let a=parseInt(t.id.split("-")[1]),l=Math.floor(a/y),n=a%y;return(0,s.jsx)("div",{className:"border p-2 text-center ".concat((Math.floor(l/2)+Math.floor(n/2))%2==0?"bg-gray-100":""),children:(null===(r=e.find(e=>e.id===t.studentId))||void 0===r?void 0:r.name)||"빈 자리"},t.id)})})]},a))})})]})]})}}},function(e){e.O(0,[425,28,971,23,744],function(){return e(e.s=1567)}),_N_E=e.O()}]);